<html><head><base href="https://%E6%94%B6%E8%B2%BB%E7%B5%B1%E8%A8%88%E5%8D%80%E6%96%B0%E5%A2%9E%E4%B8%80%E5%80%8B%E6%8C%89%E9%88%95%22%E6%8A%BD5.5%E6%88%90%22%EF%BC%8C%E6%8C%89%E4%B8%8B%E6%9C%83%E5%BE%8C%EF%BC%8C%22%E7%B8%BD%E8%A8%88%22%E6%9C%83%E8%A2%AB%E8%80%81%E9%97%86%E6%8A%BD55%25(%E5%88%86%E9%A1%9E%E8%88%87%22%E8%80%81%E9%97%86%E6%8A%BD%E6%88%90%22%E5%90%8C%E4%B8%80%E6%AC%84%E4%BD%8D)">
<title>美髮收費統計</title>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
<style>
  body {
    font-family: Arial, sans-serif;
    margin: 0;
    padding: 20px;
    background-color: #f0f0f0;
  }
  .container {
    max-width: 400px;
    margin: 0 auto;
    background-color: white;
    border-radius: 10px;
    padding: 20px;
    box-shadow: 0 2px 10px rgba(0,0,0,0.1);
  }
  h1, h2 {
    text-align: center;
    color: #333;
  }
  .service-icons {
    display: flex;
    justify-content: space-around;
    flex-wrap: wrap;
    margin-bottom: 20px;
  }
  .service-icon {
    width: 50px;
    height: 50px;
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 18px;
    color: white;
    cursor: pointer;
    transition: transform 0.1s ease;
    margin: 5px;
  }
  .service-icon:hover {
    transform: scale(1.1);
  }
  .service-icon:active {
    transform: scale(0.9);
  }
  .service-icon.active {
    border: 3px solid #333;
  }
  #wash { background-color: #3498db; }
  #cut { background-color: #e74c3c; }
  #perm { background-color: #f39c12; }
  #dye { background-color: #9b59b6; }
  #treatment { background-color: #2ecc71; }
  #other { background-color: #34495e; }

  .calculator {
    display: grid;
    grid-template-columns: repeat(3, 1fr);
    gap: 10px;
    margin-bottom: 20px;
  }
  .calc-btn {
    padding: 10px;
    font-size: 18px;
    border: none;
    background-color: #ecf0f1;
    color: #333;
    cursor: pointer;
    border-radius: 5px;
    height: 50px;
    display: flex;
    align-items: center;
    justify-content: center;
    transition: transform 0.1s ease;
  }
  .calc-btn:hover {
    background-color: #bdc3c7;
  }
  .calc-btn:active {
    transform: scale(0.95);
  }
  #amount {
    grid-column: span 3;
    padding: 10px;
    font-size: 24px;
    text-align: right;
    border: 1px solid #bdc3c7;
    border-radius: 5px;
  }
  #submit, #record {
    display: block;
    width: 100%;
    padding: 10px;
    font-size: 18px;
    color: white;
    border: none;
    border-radius: 5px;
    cursor: pointer;
    margin-bottom: 10px;
    transition: transform 0.1s ease;
  }
  #submit {
    background-color: #27ae60;
  }
  #submit:hover {
    background-color: #2ecc71;
  }
  #takePercentage, #takePercentage55, #assistantFee, #materialFee {
    display: inline-block;
    width: calc(25% - 10px);
    padding: 8px;
    font-size: 14px;
    margin-right: 5px;
    margin-bottom: 10px;
    border: none;
    border-radius: 20px;
    color: white;
    cursor: pointer;
    transition: transform 0.1s ease;
  }
  #takePercentage:last-child, #takePercentage55:last-child, #assistantFee:last-child, #materialFee:last-child {
    margin-right: 0;
  }
  #takePercentage {
    background-color: #9b59b6;
  }
  #takePercentage:hover {
    background-color: #8e44ad;
  }
  #takePercentage55 {
    background-color: #3498db;
  }
  #takePercentage55:hover {
    background-color: #2980b9;
  }
  #assistantFee {
    background-color: #e67e22;
  }
  #assistantFee:hover {
    background-color: #d35400;
  }
  #materialFee {
    background-color: #1abc9c;
  }
  #materialFee:hover {
    background-color: #16a085;
  }
  #record {
    clear: both;
    width: 100%;
    background-color: #3498db;
  }
  #record:hover {
    background-color: #2980b9;
  }
  #takePercentage:active, #takePercentage55:active, #assistantFee:active, #materialFee:active, #submit:active, #record:active {
    transform: scale(0.95);
  }
  #statistics {
    margin-top: 20px;
    border-top: 1px solid #bdc3c7;
    padding-top: 20px;
  }
  .stat-item {
    display: flex;
    justify-content: space-between;
    margin-bottom: 10px;
  }
  #customerRecords {
    margin-top: 20px;
    border-top: 1px solid #bdc3c7;
    padding-top: 20px;
  }
  table {
    width: 100%;
    border-collapse: collapse;
  }
  th, td {
    border: 1px solid #bdc3c7;
    padding: 8px;
    text-align: left;
  }
  th {
    background-color: #ecf0f1;
  }
  .delete-btn {
    background-color: #e74c3c;
    color: white;
    border: none;
    padding: 5px 10px;
    border-radius: 3px;
    cursor: pointer;
  }
  .delete-btn:hover {
    background-color: #c0392b;
  }
  .modal {
    display: none;
    position: fixed;
    z-index: 1;
    left: 0;
    top: 0;
    width: 100%;
    height: 100%;
    overflow: auto;
    background-color: rgba(0,0,0,0.4);
  }
  .modal-content {
    background-color: #fefefe;
    margin: 15% auto;
    padding: 20px;
    border: 1px solid #888;
    width: 80%;
    max-width: 300px;
    border-radius: 10px;
  }
  .close {
    color: #aaa;
    float: right;
    font-size: 28px;
    font-weight: bold;
  }
  .close:hover,
  .close:focus {
    color: black;
    text-decoration: none;
    cursor: pointer;
  }
  #myPerformance {
    margin-top: 20px;
    border-top: 1px solid #bdc3c7;
    padding-top: 20px;
  }
  @media (max-width: 600px) {
    .container {
      padding: 10px;
    }
    
    .service-icon {
      width: 50px;
      height: 50px;
      font-size: 20px;
    }
    
    .calculator {
      gap: 5px;
    }
    
    .calc-btn {
      padding: 8px;
      font-size: 16px;
    }
    
    #amount {
      font-size: 20px;
    }
    
    #submit, #record {
      font-size: 16px;
    }
    
    #takePercentage, #takePercentage55, #assistantFee, #materialFee {
      font-size: 12px;
      padding: 6px;
    }
    
    table {
      font-size: 12px;
    }
    
    th, td {
      padding: 4px;
    }
    
    .delete-btn {
      padding: 3px 6px;
    }
  }

  @media (max-width: 400px) {
    .service-icon {
      width: 40px;
      height: 40px;
      font-size: 16px;
    }
    
    .calculator {
      gap: 3px;
    }
    
    .calc-btn {
      padding: 6px;
      font-size: 14px;
    }
    
    #amount {
      font-size: 18px;
    }
    
    #submit, #record {
      font-size: 14px;
    }
    
    #takePercentage, #takePercentage55, #assistantFee, #materialFee {
      font-size: 10px;
      padding: 4px;
    }
    
    table {
      font-size: 10px;
    }
    
    th, td {
      padding: 2px;
    }
    
    .delete-btn {
      padding: 2px 4px;
    }
  }
  .modal-content .calculator {
    display: grid;
    grid-template-columns: repeat(3, 1fr);
    gap: 5px;
    margin-bottom: 20px;
  }

  .modal-content .calc-btn {
    padding: 10px;
    font-size: 18px;
    width: 100%;
    height: 50px;
    display: flex;
    align-items: center;
    justify-content: center;
  }

  .modal-content #materialAmount {
    grid-column: span 3;
    padding: 10px;
    font-size: 24px;
    text-align: right;
    border: 1px solid #bdc3c7;
    border-radius: 5px;
    margin-bottom: 10px;
  }

  .modal-content .calc-btn:nth-child(10) {
    grid-column: 1 / 3;
  }
</style>
</head>
<body>
<div class="container">
  <h1>美髮收費統計</h1>
  
  <div class="service-icons">
    <div id="wash" class="service-icon">洗</div>
    <div id="cut" class="service-icon">剪</div>
    <div id="perm" class="service-icon">燙</div>
    <div id="dye" class="service-icon">染</div>
    <div id="treatment" class="service-icon">護</div>
    <div id="other" class="service-icon">其他</div>
  </div>
  
  <div class="calculator">
    <input type="text" id="amount" readonly value="0">
    <button class="calc-btn">7</button>
    <button class="calc-btn">8</button>
    <button class="calc-btn">9</button>
    <button class="calc-btn">4</button>
    <button class="calc-btn">5</button>
    <button class="calc-btn">6</button>
    <button class="calc-btn">1</button>
    <button class="calc-btn">2</button>
    <button class="calc-btn">3</button>
    <button class="calc-btn">0</button>
    <button class="calc-btn">00</button>
    <button class="calc-btn">C</button>
  </div>
  
  <button id="submit">輸入</button>
  
  <div id="statistics">
    <h2>收費統計</h2>
    <!-- 統計資料將在這裡動態添加 -->
  </div>
  
  <button id="takePercentage">抽六成</button>
  <button id="takePercentage55">抽5.5成</button>
  <button id="assistantFee">助理收費</button>
  <button id="materialFee">材料費</button>
  <button id="record">寫下</button>
  
  <div id="customerRecords">
    <h2>客戶記錄</h2>
    <table>
      <thead>
        <tr>
          <th>日期時間</th>
          <th>服務項目</th>
          <th>總金額</th>
          <th>老闆抽成</th>
          <th>助理收費</th>
          <th>材料費</th>
          <th>操作</th>
        </tr>
      </thead>
      <tbody id="recordsBody">
        <!-- 客戶記錄將在這裡動態添加 -->
      </tbody>
    </table>
  </div>

  <div id="myPerformance">
    <h2>我的業績</h2>
    <div class="stat-item">
      <span>店裡業績</span>
      <span id="shopPerformance">$0</span>
    </div>
    <div class="stat-item">
      <span>我的收入</span>
      <span id="myIncome">$0</span>
    </div>
  </div>
</div>

<div id="materialFeeModal" class="modal">
  <div class="modal-content">
    <span class="close">&times;</span>
    <h2>輸入材料費</h2>
    <div class="calculator">
      <input type="text" id="materialAmount" readonly value="0">
      <button class="calc-btn material-calc-btn">7</button>
      <button class="calc-btn material-calc-btn">8</button>
      <button class="calc-btn material-calc-btn">9</button>
      <button class="calc-btn material-calc-btn">4</button>
      <button class="calc-btn material-calc-btn">5</button>
      <button class="calc-btn material-calc-btn">6</button>
      <button class="calc-btn material-calc-btn">1</button>
      <button class="calc-btn material-calc-btn">2</button>
      <button class="calc-btn material-calc-btn">3</button>
      <button class="calc-btn material-calc-btn">0</button>
      <button class="calc-btn material-calc-btn">C</button>
    </div>
    <button id="submitMaterialFee">確認</button>
  </div>
</div>

<script>
document.addEventListener('DOMContentLoaded', function() {
  const serviceIcons = document.querySelectorAll('.service-icon');
  const mainCalcBtns = document.querySelectorAll('.calc-btn:not(.assistant-calc-btn):not(.material-calc-btn)');
  const calcBtns = document.querySelectorAll('.calc-btn');
  const amountInput = document.getElementById('amount');
  const submitBtn = document.getElementById('submit');
  const recordBtn = document.getElementById('record');
  const takePercentageBtn = document.getElementById('takePercentage');
  const takePercentage55Btn = document.getElementById('takePercentage55');
  const assistantFeeBtn = document.getElementById('assistantFee');
  const materialFeeBtn = document.getElementById('materialFee');
  const statisticsDiv = document.getElementById('statistics');
  const recordsBody = document.getElementById('recordsBody');
  
  const materialFeeModal = document.getElementById('materialFeeModal');
  const materialCloseModal = materialFeeModal.querySelector('.close');
  const materialAmountInput = document.getElementById('materialAmount');
  const materialCalcBtns = document.querySelectorAll('.material-calc-btn');
  const submitMaterialFeeBtn = document.getElementById('submitMaterialFee');
  
  let currentService = null;
  let statistics = {
    wash: 0,
    cut: 0,
    perm: 0,
    dye: 0,
    treatment: 0,
    other: 0
  };
  let bossFee = 0;
  let assistantFee = 0;
  let materialFee = 0;
  
  function saveRecords() {
    localStorage.setItem('customerRecords', recordsBody.innerHTML);
  }

  function loadRecords() {
    const savedRecords = localStorage.getItem('customerRecords');
    if (savedRecords) {
      recordsBody.innerHTML = savedRecords;
      document.querySelectorAll('.delete-btn').forEach(btn => {
        btn.addEventListener('click', function() {
          this.closest('tr').remove();
          saveRecords();
          updateMyPerformance();
        });
      });
      updateMyPerformance();
    }
  }

  loadRecords();

  serviceIcons.forEach(icon => {
    icon.addEventListener('click', function() {
      serviceIcons.forEach(i => i.classList.remove('active'));
      this.classList.add('active');
      currentService = this.id;
    });
  });
  
  function handleCalcBtnClick(btn, input) {
    const value = btn.textContent;
    if (value === 'C') {
      input.value = '0';
    } else if (input.value === '0') {
      input.value = value;
    } else {
      input.value += value;
    }
  }
  
  mainCalcBtns.forEach(btn => {
    btn.addEventListener('click', function() {
      handleCalcBtnClick(this, amountInput);
    });
  });
  
  materialCalcBtns.forEach(btn => {
    btn.addEventListener('click', function() {
      handleCalcBtnClick(this, materialAmountInput);
    });
  });
  
  submitBtn.addEventListener('click', function() {
    if (currentService && amountInput.value !== '0') {
      const amount = parseInt(amountInput.value);
      statistics[currentService] += amount;
      updateStatistics();
      amountInput.value = '0';
      serviceIcons.forEach(i => i.classList.remove('active'));
      currentService = null;
    } else {
      alert('請選擇服務項目並輸入金額！');
    }
  });
  
  takePercentageBtn.addEventListener('click', function() {
    const total = Object.values(statistics).reduce((sum, curr) => sum + curr, 0);
    bossFee = Math.round(total * 0.6);
    updateStatistics();
  });

  takePercentage55Btn.addEventListener('click', function() {
    const total = Object.values(statistics).reduce((sum, curr) => sum + curr, 0);
    bossFee = Math.round(total * 0.55);
    updateStatistics();
  });
  
  assistantFeeBtn.addEventListener('click', function() {
    const total = Object.values(statistics).reduce((sum, curr) => sum + curr, 0);
    assistantFee = Math.round(total * 0.4 * 0.2);
    updateStatistics();
  });
  
  materialFeeBtn.addEventListener('click', function() {
    materialFeeModal.style.display = 'block';
    materialAmountInput.value = '0';
  });
  
  materialCloseModal.addEventListener('click', function() {
    materialFeeModal.style.display = 'none';
  });
  
  submitMaterialFeeBtn.addEventListener('click', function() {
    materialFee = parseInt(materialAmountInput.value);
    updateStatistics();
    materialFeeModal.style.display = 'none';
  });
  
  recordBtn.addEventListener('click', function() {
    const total = Object.values(statistics).reduce((sum, curr) => sum + curr, 0);
    if (total > 0) {
      const now = new Date();
      const dateTime = `${now.toLocaleDateString()} ${now.toLocaleTimeString()}`;
      const services = Object.entries(statistics)
        .filter(([_, amount]) => amount > 0)
        .map(([service, amount]) => getServiceName(service, amount))
        .join(', ');
      
      const newRow = recordsBody.insertRow(0);
      newRow.innerHTML = `
        <td>${dateTime}</td>
        <td>${services}</td>
        <td>$${total}</td>
        <td>$${bossFee}</td>
        <td>$${assistantFee}</td>
        <td>$${materialFee}</td>
        <td><button class="delete-btn">清除</button></td>
      `;
      
      const deleteBtn = newRow.querySelector('.delete-btn');
      deleteBtn.addEventListener('click', function() {
        recordsBody.removeChild(newRow);
        updateMyPerformance();
        saveRecords();
      });
      
      statistics = {wash: 0, cut: 0, treatment: 0, perm: 0, dye: 0, other: 0};
      bossFee = 0;
      assistantFee = 0;
      materialFee = 0;
      amountInput.value = '0';
      updateStatistics();
      saveRecords();
      updateMyPerformance();
    } else {
      alert('沒有可記錄的服務項目！');
    }
  });
  
  function updateStatistics() {
    statisticsDiv.innerHTML = '<h2>收費統計</h2>';
    for (const [service, amount] of Object.entries(statistics)) {
      if (amount > 0) {
        const div = document.createElement('div');
        div.className = 'stat-item';
        div.innerHTML = `<span>${getServiceName(service)}</span><span>$${amount}</span>`;
        statisticsDiv.appendChild(div);
      }
    }
    const totalDiv = document.createElement('div');
    totalDiv.className = 'stat-item';
    const total = Object.values(statistics).reduce((sum, curr) => sum + curr, 0);
    totalDiv.innerHTML = `<strong>總計</strong><strong>$${total}</strong>`;
    statisticsDiv.appendChild(totalDiv);
    
    if (bossFee > 0) {
      const bossFeeDiv = document.createElement('div');
      bossFeeDiv.className = 'stat-item';
      bossFeeDiv.innerHTML = `<strong>老闆抽成</strong><strong>$${bossFee}</strong>`;
      statisticsDiv.appendChild(bossFeeDiv);
    }
    
    if (assistantFee > 0) {
      const assistantFeeDiv = document.createElement('div');
      assistantFeeDiv.className = 'stat-item';
      assistantFeeDiv.innerHTML = `<strong>助理收費</strong><strong>$${assistantFee}</strong>`;
      statisticsDiv.appendChild(assistantFeeDiv);
    }
    
    if (materialFee > 0) {
      const materialFeeDiv = document.createElement('div');
      materialFeeDiv.className = 'stat-item';
      materialFeeDiv.innerHTML = `<strong>材料費</strong><strong>$${materialFee}</strong>`;
      statisticsDiv.appendChild(materialFeeDiv);
    }
  }

  function updateMyPerformance() {
    const rows = recordsBody.querySelectorAll('tr');
    let shopPerformance = 0;
    let myIncome = 0;

    rows.forEach(row => {
      const cells = row.querySelectorAll('td');
      const total = parseInt(cells[2].textContent.replace('$', ''));
      const bossFee = parseInt(cells[3].textContent.replace('$', ''));
      const assistantFee = parseInt(cells[4].textContent.replace('$', ''));
      const materialFee = parseInt(cells[5].textContent.replace('$', ''));

      shopPerformance += total;
      myIncome += total - bossFee - assistantFee - materialFee;
    });

    document.getElementById('shopPerformance').textContent = `$${shopPerformance}`;
    document.getElementById('myIncome').textContent = `$${myIncome}`;
  }
  
  function getServiceName(service, amount) {
    const names = {
      wash: '洗',
      cut: '剪',
      perm: '燙',
      dye: '染',
      treatment: '護',
      other: '其他'
    };
    return `${names[service]}${amount}`;
  }
  
  window.onclick = function(event) {
    if (event.target == materialFeeModal) {
      materialFeeModal.style.display = "none";
    }
  }
});
</script>
</body></html>