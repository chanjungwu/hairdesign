<!DOCTYPE html>
<html>
<head>
    <title>Ë∑≥Áπ©Â∞èÂ≠∏Â†Ç</title>
    <style>
        :root {
            --primary-blue: #e3f2fd;
            --border-blue: #90caf9;
        }

        body {
            font-family: 'Arial Rounded MT Bold', Arial, sans-serif;
            background-color: white;
            margin: 0;
            padding: 20px;
            min-height: 100vh;
            position: relative;
        }

        /* Ë£ùÈ£æÂÖÉÁ¥† */
        .decoration {
            position: fixed;
            z-index: -1;
        }

        .decoration.top-left {
            top: 20px;
            left: 20px;
            font-size: 40px;
        }

        .decoration.top-right {
            top: 20px;
            right: 20px;
            font-size: 40px;
        }

        .decoration.bottom-left {
            bottom: 20px;
            left: 20px;
            font-size: 40px;
        }

        .decoration.bottom-right {
            bottom: 20px;
            right: 20px;
            font-size: 40px;
        }

        .container {
            max-width: 800px;
            margin: 0 auto;
            text-align: center;
            padding: 30px;
            border: 15px solid transparent;
            border-image: linear-gradient(45deg, #ffcdd2, #bbdefb, #c8e6c9, #fff9c4) 1;
            border-radius: 20px;
            background-color: white;
            box-shadow: 
                0 4px 8px rgba(0,0,0,0.1),
                inset 0 0 20px rgba(0,0,0,0.05);
            position: relative;
        }

        .container::before {
            content: 'üéÄ';
            position: absolute;
            top: -25px;
            left: 50%;
            transform: translateX(-50%);
            font-size: 40px;
            text-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }

        .container::after {
            content: '';
            position: absolute;
            top: -5px;
            left: -5px;
            right: -5px;
            bottom: -5px;
            border: 2px solid #e3f2fd;
            border-radius: 25px;
            pointer-events: none;
            z-index: -1;
        }

        /* ÁôªÂÖ•Ë°®ÂñÆÊ®£Âºè */
        .login-form {
            background-color: white;
            padding: 30px;
            border-radius: 15px;
            border: 2px solid var(--border-blue);
            max-width: 400px;
            margin: 50px auto;
        }

        .form-group {
            margin-bottom: 20px;
        }

        .form-group label {
            display: block;
            margin-bottom: 5px;
            color: #1976d2;
        }

        .form-group input {
            width: 100%;
            padding: 10px;
            border: 2px solid var(--border-blue);
            border-radius: 8px;
            font-size: 16px;
        }

        .submit-btn {
            background-color: #1976d2;
            color: white;
            border: none;
            padding: 12px 24px;
            border-radius: 8px;
            cursor: pointer;
            font-size: 16px;
            transition: all 0.3s ease;
        }

        .submit-btn:hover {
            background-color: #1565c0;
            transform: translateY(-2px);
        }

        /* ÈÄ≤Â∫¶Ê¢ùÊ®£Âºè */
        .progress-container {
            width: 100%;
            height: 20px;
            background-color: var(--primary-blue);
            border-radius: 10px;
            margin-top: 20px;
            position: relative;
        }

        .progress-bar {
            height: 100%;
            width: 0%;
            background-color: #1976d2;
            border-radius: 10px;
            transition: width 0.3s ease;
        }

        .quiz-marker {
            position: absolute;
            width: 10px;
            height: 10px;
            background-color: #ff4081;
            border-radius: 50%;
            top: -5px;
            transform: translateX(-50%);
            cursor: pointer;
        }

        /* ‰∏ªË¶ÅÂÖßÂÆπÂçÄÂüüÂàùÂßãÈö±Ëóè */
        .main-content {
            display: none;
            visibility: hidden;
        }

        /* ÊèêÁ§∫Ë®äÊÅØÊ®£Âºè */
        .message-popup {
            position: fixed;
            top: 20px;
            right: 20px;
            background-color: rgba(25, 118, 210, 0.9);
            color: white;
            padding: 10px 20px;
            border-radius: 8px;
            display: none;
            animation: slideIn 0.3s ease;
        }

        /* ÊïôÂ∏´Êü•Ë©¢ÂçÄÂüüÊ®£Âºè */
        .teacher-query {
            position: fixed;
            top: 20px;
            right: 20px;
            background-color: white;
            padding: 15px;
            border-radius: 10px;
            border: 2px solid var(--border-blue);
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
            z-index: 1000;
        }

        .teacher-query input {
            padding: 8px;
            border: 1px solid var(--border-blue);
            border-radius: 5px;
            margin-right: 5px;
        }

        .teacher-query button {
            padding: 8px 15px;
            background-color: #1976d2;
            color: white;
            border: none;
            border-radius: 5px;
            cursor: pointer;
        }

        .query-result-success {
            margin-top: 10px;
            padding: 10px;
            background-color: #e8f5e9;
            border-radius: 5px;
        }

        .query-result-error {
            margin-top: 10px;
            padding: 10px;
            background-color: #ffebee;
            border-radius: 5px;
            color: #c62828;
        }

        .completion-code {
            margin: 20px 0;
            padding: 15px;
            background-color: #e3f2fd;
            border-radius: 10px;
        }

        .code-display {
            font-size: 24px;
            font-weight: bold;
            color: #1976d2;
            padding: 10px;
            margin: 10px 0;
            background-color: white;
            border-radius: 5px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }

        /* Êí≠ÊîæÊéßÂà∂ÊåâÈàïÊ®£Âºè */
        .custom-controls {
            display: flex;
            gap: 10px;
            justify-content: center;
            margin-top: 15px;
            padding: 10px;
        }

        .custom-controls button {
            padding: 10px 20px;
            border: none;
            border-radius: 50px;
            font-size: 16px;
            cursor: pointer;
            transition: all 0.3s ease;
            background: #fff;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
            display: flex;
            align-items: center;
            gap: 5px;
        }

        .custom-controls button:nth-child(1)::before {
            content: '‚ñ∂Ô∏è';
        }

        .custom-controls button:nth-child(2)::before {
            content: '‚è∏Ô∏è';
        }

        .custom-controls button:nth-child(3)::before {
            content: 'üîá';
        }

        .custom-controls button:nth-child(4)::before {
            content: 'üîä';
        }

        .custom-controls button:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 8px rgba(0,0,0,0.15);
            background: linear-gradient(45deg, #ffebee, #e3f2fd);
        }

        .custom-controls button:active {
            transform: translateY(0);
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }

        /* ÂÖ®ÈÉ®Â≠∏ÁîüË≥áÊñôË°®Ê†ºÊ®£Âºè */
        .all-students-table {
            width: 100%;
            margin-top: 20px;
            border-collapse: collapse;
            background-color: white;
            border-radius: 8px;
            overflow: hidden;
        }

        .all-students-table th,
        .all-students-table td {
            padding: 12px;
            text-align: left;
            border-bottom: 1px solid var(--border-blue);
        }

        .all-students-table th {
            background-color: var(--primary-blue);
            color: #1976d2;
        }

        .all-students-table tr:hover {
            background-color: #f5f5f5;
        }

        @keyframes slideIn {
            from { transform: translateX(100%); }
            to { transform: translateX(0); }
        }
/* Ê∏¨È©óÁõ∏ÈóúÊ®£Âºè */
.quiz-overlay {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background-color: rgba(255, 255, 255, 0.95);
    display: flex;
    justify-content: center;
    align-items: center;
    opacity: 0;
    transition: opacity 0.5s;
    z-index: 1000;
}

.quiz-container {
    background-color: white;
    padding: 30px;
    border-radius: 20px;
    box-shadow: 0 4px 20px rgba(0, 0, 0, 0.1);
    max-width: 500px;
    width: 90%;
    text-align: center;
    border: 3px solid var(--border-blue);
}

.quiz-emoji {
    font-size: 40px;
    margin-bottom: 20px;
}

.quiz-question {
    font-size: 18px;
    margin: 20px 0;
    color: #1976d2;
}

.quiz-option {
    display: block;
    width: 100%;
    padding: 15px;
    margin: 10px 0;
    border: 2px solid var(--border-blue);
    border-radius: 10px;
    background-color: white;
    color: #1976d2;
    cursor: pointer;
    transition: all 0.3s;
}

.quiz-option:hover {
    background-color: var(--primary-blue);
    transform: translateY(-2px);
}

.quiz-feedback {
    margin-top: 20px;
    padding: 15px;
    border-radius: 10px;
}

.feedback-correct {
    background-color: #e8f5e9;
    color: #2e7d32;
    padding: 10px;
    border-radius: 8px;
}

.feedback-incorrect {
    background-color: #ffebee;
    color: #c62828;
    padding: 10px;
    border-radius: 8px;
}

.final-score-overlay {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background-color: rgba(255, 255, 255, 0.95);
    display: flex;
    justify-content: center;
    align-items: center;
    z-index: 2000;
}

.final-score-container {
    background-color: white;
    padding: 40px;
    border-radius: 20px;
    box-shadow: 0 4px 20px rgba(0, 0, 0, 0.1);
    text-align: center;
    border: 3px solid var(--border-blue);
}

.celebration-emoji {
    font-size: 60px;
    margin-bottom: 20px;
}

.score-display {
    font-size: 24px;
    color: #1976d2;
    margin: 20px 0;
}

.score-message {
    color: #333;
    margin: 20px 0;
}
    </style>
</head>
<body>
    <!-- Ë£ùÈ£æÂÖÉÁ¥† -->
    <div class="decoration top-left">üéæ</div>
    <div class="decoration top-right">üèÉ</div>
    <div class="decoration bottom-left">‚≠ê</div>
    <div class="decoration bottom-right">üåü</div>

    <!-- ÊïôÂ∏´Êü•Ë©¢ÂçÄÂüü -->
    <div class="teacher-query">
        <input type="text" id="codeQuery" placeholder="Ë´ãËº∏ÂÖ•ÈÄöÈóúÂØÜË™û">
        <button onclick="queryCompletionCode()">Êü•Ë©¢</button>
        <div id="queryResult"></div>
    </div>

    <!-- ÁôªÂÖ•Ë°®ÂñÆ -->
    <div class="login-form" id="loginForm">
        <h2>Ê≠°Ëøé‰æÜÂà∞Ë∑≥Áπ©Â∞èÂ≠∏Â†Ç</h2>
        <div class="form-group">
            <label for="studentId">Â≠∏Ëôü (‰æãÂ¶Ç: 112029)</label>
            <input type="text" id="studentId" placeholder="Ë´ãËº∏ÂÖ•Â≠∏Ëôü">
        </div>
        <div class="form-group">
            <label for="studentName">ÂßìÂêç</label>
            <input type="text" id="studentName" placeholder="Ë´ãËº∏ÂÖ•ÂßìÂêç">
        </div>
        <button class="submit-btn" onclick="validateStudent()">ÈÄ≤ÂÖ•Ë™≤Á®ã</button>
    </div>

    <!-- ‰∏ªË¶ÅÂÖßÂÆπÂçÄÂüüÔºàÂàùÂßãÈö±ËóèÔºâ -->
    <div class="main-content" id="mainContent">
        <div class="container">
            <h1>üéæ Ë∑≥Áπ©Â∞èÂ≠∏Â†Ç üéæ</h1>
            <div class="welcome-message" id="welcomeMessage"></div>
            <div id="player"></div>
            <div class="progress-container">
                <div class="progress-bar" id="progressBar"></div>
            </div>
        </div>
    </div>

    <!-- ÊèêÁ§∫Ë®äÊÅØ -->
    <div class="message-popup" id="messagePopup"></div>
</body>
</html>
<script>
// Â≠∏ÁîüË≥áÊñô
const studentData = {
    '112029': 'Èô≥ÁíüÂ≠∏',
    '112030': 'ÈªÉÁúæÂã§',
    '112031': 'Êùé‰ª•ÊÅ©',
    '112032': 'ÊûóËîö‰∏û',
    '112033': 'ÂªñÊôßÂµé',
    '112034': 'ÂæêÁùøÂæó',
    '112170': 'ÊõæÂÆáÊô®',
    '112036': 'Ë≥¥Êô®Á¢©',
    '112038': 'ÈçæÁ®ãÂ∏Ü',
    '112039': 'ÊõæÊåØÁ®ã',
    '112040': 'Ë©πÊ£ãÊ∑Ø',
    '112041': 'Ê≤àÂá±‰∫¶',
    '112042': 'ÈªÉÂçÉÈÄ†',
    '112043': 'ÂªñÊ¢ìÁöì',
    '112044': 'ÁéãÂÆâÂ©ï',
    '112045': 'Èô≥Â≠êËäØ',
    '112046': 'È°èËè°Ë™º',
    '112047': 'ÈªÉÂÆ•È¶ú',
    '112048': '‰∏ÅÁæΩÂ≤ë',
    '112049': 'ÊûóËäÆË®Ä',
    '112050': 'ÂëÇÈõ®ËäØ',
    '112051': 'Èô≥Ëä∑Á©é',
    '112052': 'ÈçæÂ≤ëÁö£',
    '112053': 'ÂºµÈ¶®‰∫à',
    '112054': 'Ë∂ôËääÁ©é',
    '112055': 'Âê≥ÂèØÁ≠†',
    '112177': 'Êú±Ë≤ûÁÜô',
    '112178': 'Ëî°ÊòÄÊÜì'
};

let player;
let lastTimeUpdate = 0;
const timeUpdateInterval = 250; // Êõ¥Êñ∞È†ªÁéáÔºàÊØ´ÁßíÔºâ
let youtubeApiReady = false;

// YouTube API ËºâÂÖ•
function loadYouTubeAPI() {
    var tag = document.createElement('script');
    tag.src = "https://www.youtube.com/iframe_api";
    var firstScriptTag = document.getElementsByTagName('script')[0];
    firstScriptTag.parentNode.insertBefore(tag, firstScriptTag);
}

// È©óË≠âÂ≠∏ÁîüË≥áÊñô
function validateStudent() {
    const studentId = document.getElementById('studentId').value;
    const studentName = document.getElementById('studentName').value;

    if (!studentId || !studentName) {
        showMessage('Ë´ãÂ°´ÂØ´ÂÆåÊï¥ÁöÑÂ≠∏ËôüÂíåÂßìÂêç');
        return;
    }

    if (!studentData[studentId]) {
        showMessage('Êü•ÁÑ°Ê≠§Â≠∏Ëôü');
        return;
    }

    if (studentData[studentId] !== studentName) {
        showMessage('Â≠∏ËôüËàáÂßìÂêç‰∏çÁ¨¶');
        return;
    }

    // ÁôªÂÖ•ÊàêÂäü
    document.getElementById('loginForm').style.display = 'none';
    const mainContent = document.getElementById('mainContent');
    mainContent.style.display = 'block';
    mainContent.style.visibility = 'visible';
    document.getElementById('welcomeMessage').textContent = `Ê≠°Ëøé ${studentName} ÂêåÂ≠∏`;

    // ÂàùÂßãÂåñ YouTube Êí≠ÊîæÂô®
    if (!player) {
        loadYouTubeAPI();
    }
}

// È°ØÁ§∫ÊèêÁ§∫Ë®äÊÅØ
function showMessage(text, duration = 3000) {
    const popup = document.getElementById('messagePopup');
    popup.textContent = text;
    popup.style.display = 'block';
    
    setTimeout(() => {
        popup.style.display = 'none';
    }, duration);
}

// YouTube Êí≠ÊîæÂô®ÂàùÂßãÂåñ
function onYouTubeIframeAPIReady() {
    youtubeApiReady = true;
    player = new YT.Player('player', {
        height: '360',
        width: '640',
        videoId: 'sfBmkBlzG-Y',
        playerVars: {
            disablekb: 1,        // Á¶ÅÁî®ÈçµÁõ§ÊéßÂà∂
            controls: 0,         // Èö±ËóèÊí≠ÊîæÂô®ÊéßÂà∂È†Ö
            modestbranding: 1,   // Èö±Ëóè YouTube Logo
            rel: 0,             // ‰∏çÈ°ØÁ§∫Áõ∏ÈóúË¶ñÈ†ª
            showinfo: 0,        // ‰∏çÈ°ØÁ§∫Ë¶ñÈ†ª‰ø°ÊÅØ
            fs: 0              // Á¶ÅÁî®ÂÖ®Ëû¢Âπï
        },
        events: {
            'onStateChange': onPlayerStateChange,
            'onReady': onPlayerReady
        }
    });
}

// Êí≠ÊîæÂô®Â∞±Á∑í
function onPlayerReady(event) {
    // Ê∑ªÂä†Ëá™ÂÆöÁæ©ÊéßÂà∂ÊåâÈàï
    addCustomControls();
    
    // Ë®≠ÁΩÆÈÄ≤Â∫¶Ê¢ùÊ®ôË®ò
    setupProgressMarkers();
}

// Êí≠ÊîæÁãÄÊÖãÊîπËÆä
function onPlayerStateChange(event) {
    if (event.data == YT.PlayerState.PLAYING) {
        startTimeTracking();
    } else {
        stopTimeTracking();
    }
}

// ÈñãÂßãËøΩËπ§ÊôÇÈñì
function startTimeTracking() {
    if (!player) return;
    
    const trackTime = () => {
        const currentTime = player.getCurrentTime();
        
        // Ê™¢Êü•ÊòØÂê¶Ë©¶ÂúñË∑≥ËΩâ
        if (Math.abs(currentTime - lastTimeUpdate) > 2) {
            showMessage('‰∏çË¶ÅË∑≥ËΩâÂñîÔºåÊúâÂ∞èËÄÉÈ°åÁõÆÂñî');
            player.seekTo(lastTimeUpdate, true);
        }
        
        lastTimeUpdate = currentTime;
        updateProgressBar(currentTime);
        
        // Ê™¢Êü•Ê∏¨È©óÊôÇÈñìÈªû
        checkQuizTime(currentTime);
        
        if (player.getPlayerState() == YT.PlayerState.PLAYING) {
            setTimeout(trackTime, timeUpdateInterval);
        }
    };
    
    trackTime();
}

// ÂÅúÊ≠¢ËøΩËπ§ÊôÇÈñì
function stopTimeTracking() {
    clearTimeout(timeUpdateInterval);
}

// Êõ¥Êñ∞ÈÄ≤Â∫¶Ê¢ù
function updateProgressBar(currentTime) {
    const duration = player.getDuration();
    const progress = (currentTime / duration) * 100;
    document.getElementById('progressBar').style.width = `${progress}%`;
}

// Ê∑ªÂä†Ëá™ÂÆöÁæ©ÊéßÂà∂ÊåâÈàï
function addCustomControls() {
    const controlsDiv = document.createElement('div');
    controlsDiv.className = 'custom-controls';
    controlsDiv.innerHTML = `
        <button onclick="playVideo()">Êí≠Êîæ</button>
        <button onclick="pauseVideo()">Êö´ÂÅú</button>
        <button onclick="muteVideo()">ÈùúÈü≥</button>
        <button onclick="unmuteVideo()">ÂèñÊ∂àÈùúÈü≥</button>
    `;
    
    document.getElementById('player').after(controlsDiv);
}

// Êí≠ÊîæÂô®ÊéßÂà∂ÂáΩÊï∏
function playVideo() { if (player) player.playVideo(); }
function pauseVideo() { if (player) player.pauseVideo(); }
function muteVideo() { if (player) player.mute(); }
function unmuteVideo() { if (player) player.unMute(); }
</script>
<script>
// Ê∏¨È©óÈ°åÁõÆË≥áÊñô
const quizzes = [
    {
        time: 60,
        question: "Ë∑≥Áπ©ÁöÑÈï∑Â∫¶ÔºåË∏©ËëóË∑≥Áπ©Ê∏¨ÈáèÂà∞Âì™Ë£°ÈÅ©ÂêàÔºü",
        options: ["ËÖã‰∏ã", "ËÖ∞ÈÉ®", "È†≠È†Ç", "ËÜùËìã"],
        correct: 0,
        feedback: {
            correct: "Á≠îÂ∞ç‰∫ÜÔºÅË∑≥Áπ©Èï∑Â∫¶Âà∞ËÖã‰∏ãÊòØÊúÄÈÅ©ÂêàÁöÑÔºÅ",
            incorrect: "Á≠îÈåØ‰∫ÜÔºÅÊ≠£Á¢∫Á≠îÊ°àÊòØËÖã‰∏ãÂñîÔºÅË∑≥Áπ©Â§™Èï∑ÊàñÂ§™Áü≠ÈÉΩÊúÉÂΩ±ÈüøË∑≥Áπ©ÁöÑÈ†ÜÊö¢Â∫¶„ÄÇ"
        }
    },
    {
        time: 94,
        question: "ÊéßÂà∂Ë∑≥Áπ©ÊñπÂêë‰∏ªË¶Å‰ΩøÁî®Ôºö",
        options: ["Â∞èÊãáÊåá", "ÁÑ°ÂêçÊåá", "ÊâãËÇò", "Â§ßÊãáÊåá"],
        correct: 3,
        feedback: {
            correct: "Ê≤íÈåØÔºÅ‰ΩøÁî®Â§ßÊãáÊåá‰æÜÊéßÂà∂Ë∑≥Áπ©ÊñπÂêëÊúÄÊ∫ñÁ¢∫ÔºÅ",
            incorrect: "‰∏çÂ∞çÂñîÔºÅ‰ΩøÁî®Â§ßÊãáÊåá‰æÜÊéßÂà∂Ë∑≥Áπ©ÊñπÂêëÊâçÊòØÊ≠£Á¢∫ÁöÑÂÅöÊ≥ïÔºÅ"
        }
    },
    {
        time: 124,
        question: "ÊïôÁ∑¥Ë™çÁÇ∫Ë∑≥Áπ©ÊúÄÂ§ßÁöÑÁΩ©ÈñÄ(Âõ∞Èõ£Ëôï)ÊòØÂì™ÂÄãÔºü",
        options: ["Ë∑≥Ë∫çÈ´òÂ∫¶", "Ë∫´È´ò", "Áî©Áπ©", "È†≠ÈÉ®Â§ßÂ∞è"],
        correct: 2,
        feedback: {
            correct: "Á≠îÂ∞ç‰∫ÜÔºÅÁî©Áπ©Á¢∫ÂØ¶ÊòØÊúÄÂõ∞Èõ£ÁöÑÈÉ®ÂàÜÔºÅ",
            incorrect: "Á≠îÈåØ‰∫ÜÔºÅÁî©Áπ©ÊäÄÂ∑ßÊòØÊúÄÂ§ßÁöÑÂõ∞Èõ£ËôïÂñîÔºÅ"
        }
    },
    {
        time: 145,
        question: "ÂΩ±ÁâáÊïôÁ∑¥Ë™™ÊòéË∑≥Áπ©ÊôÇËÜùËìã‰∏çË¶ÅÈÅéÂ∫¶ÊâìÁõ¥ÔºåÊâøËûçËÄÅÂ∏´ÂâáË™çÁÇ∫ÔºåÂ∞èÊúãÂèãÂàùÂ≠∏Ë∑≥Áπ©ÊôÇÔºåËÜùËìãÊáâ...",
        options: ["Áõ°ÂèØËÉΩÂΩéÊõ≤", "ÊâìÁõ¥‰∏ÄÈªû"],
        correct: 1,
        feedback: {
            correct: "ÊâøËûçËÄÅÂ∏´Ë™çÁÇ∫Â∞èÊúãÂèãË∑≥Áπ©ÊôÇËÜùËìãÈÅéÂΩéÁöÑÊÉÖÂΩ¢Â§öÊñºËÜùËìãÈÅéÊñºÊâìÁõ¥ÁöÑÊÉÖÂΩ¢ÔºåÂõ†Ê≠§ÈºìÂãµÂêåÂ≠∏ËÜùËìãÊâìÁõ¥‰∏Ä‰∫õ„ÄÇ",
            incorrect: "Á≠îÈåØ‰∫ÜÔºÅÊâøËûçËÄÅÂ∏´Âª∫Ë≠∞ÂàùÂ≠∏ËÄÖÊáâË©≤Ë¶ÅÊääËÜùËìãÊâìÁõ¥‰∏ÄÈªûÂñîÔºÅ"
        }
    },
    {
        time: 225,
        question: "ÊïôÁ∑¥Ë™™Ë∑≥Ë∫çÁöÑÈ´òÂ∫¶Á¥ÑÂπæÂÖ¨ÂàÜÔºö",
        options: ["2.5~5ÂÖ¨ÂàÜ", "10~15ÂÖ¨ÂàÜ", "15~20ÂÖ¨ÂàÜ", "20~25ÂÖ¨ÂàÜ"],
        correct: 0,
        feedback: {
            correct: "Ê≠£Á¢∫ÔºÅË∑≥Ë∫ç‰∏çÈúÄË¶ÅÂ§™È´òÔºå2.5~5ÂÖ¨ÂàÜÂ∞±Ë∂≥Â§†‰∫ÜÔºÅ",
            incorrect: "Á≠îÈåØ‰∫ÜÔºÅË∑≥Áπ©ÊôÇÂè™ÈúÄË¶ÅË∑≥2.5~5ÂÖ¨ÂàÜÁöÑÈ´òÂ∫¶Â∞±Â§†‰∫ÜÔºå‰∏çÈúÄË¶ÅË∑≥Â§™È´òÂñîÔºÅ"
        }
    },
    {
        time: 450,
        question: "Êú¨Ë™≤Â†ÇÊ¥ªÂãïÈùûÂïÜÊ•≠Ê¥ªÂãïÔºåÂõ†Ê≠§‰∏çÈºìÂãµ(‰πü‰∏çÂèçÂ∞ç)Â∞èÊúãÂèã‰∏äÂÇ≥ÂΩ±ÁâáËá≥Ê≥∞ËêåÊïôÁ∑¥Ë™™ÁöÑÁ∂≤Á´ôÔºå‰∫ÜËß£ÂóéÔºü",
        options: ["‰∫ÜËß£", "ÊáÇ‰∫Ü", "ÈùûÂ∏∏‰∫ÜËß£", "ÈÅµÂëΩ"],
        correct: [0, 1, 2, 3],
        feedback: {
            correct: "Ë¨ùË¨ù‰Ω†ÁöÑÁêÜËß£ÔºÅ",
            incorrect: "Ë´ãÂÜç‰ªîÁ¥∞ÊÉ≥ÊÉ≥ÔΩû"
        }
    }
];

let score = 0;
const totalQuestions = quizzes.length;

// Ë®≠ÁΩÆÈÄ≤Â∫¶Ê¢ùÊ∏¨È©óÊ®ôË®ò
function setupProgressMarkers() {
    const duration = player.getDuration();
    const progressContainer = document.querySelector('.progress-container');
    
    quizzes.forEach((quiz, index) => {
        const marker = document.createElement('div');
        marker.className = 'quiz-marker';
        marker.style.left = `${(quiz.time / duration) * 100}%`;
        marker.title = `Ê∏¨È©ó ${index + 1}`;
        progressContainer.appendChild(marker);
    });
}

// Ê™¢Êü•Ê∏¨È©óÊôÇÈñìÈªû
function checkQuizTime(currentTime) {
    quizzes.forEach((quiz, index) => {
        if (Math.abs(currentTime - quiz.time) < 1 && !quiz.completed) {
            showQuiz(index);
            quiz.completed = true;
            player.pauseVideo();
        }
    });
}

// È°ØÁ§∫Ê∏¨È©ó
function showQuiz(index) {
    const quiz = quizzes[index];
    const overlay = document.createElement('div');
    overlay.className = 'quiz-overlay';
    overlay.innerHTML = `
        <div class="quiz-container">
            <div class="quiz-emoji">üìù</div>
            <h3>Á¨¨ ${index + 1} È°å</h3>
            <div class="quiz-question">${quiz.question}</div>
            <div class="quiz-options">
                ${quiz.options.map((option, i) => `
                    <button class="quiz-option" onclick="checkAnswer(${index}, ${i})">${option}</button>
                `).join('')}
            </div>
            <div class="quiz-feedback"></div>
        </div>
    `;
    document.body.appendChild(overlay);

    // Ê∑ªÂä†ÂãïÁï´ÊïàÊûú
    setTimeout(() => overlay.style.opacity = '1', 0);
}

// Ê™¢Êü•Á≠îÊ°à
function checkAnswer(quizIndex, selectedOption) {
    const quiz = quizzes[quizIndex];
    const overlay = document.querySelector('.quiz-overlay');
    const feedback = overlay.querySelector('.quiz-feedback');
    
    const isCorrect = Array.isArray(quiz.correct) 
        ? quiz.correct.includes(selectedOption)
        : selectedOption === quiz.correct;

    if (isCorrect) {
        score++;
        feedback.innerHTML = `
            <div class="feedback-correct">
                <span class="emoji">‚ú®</span>
                ${quiz.feedback.correct}
            </div>
        `;
        
        // Âª∂ÈÅ≤ÂæåÁπºÁ∫åÊí≠Êîæ
        setTimeout(() => {
            overlay.style.opacity = '0';
            setTimeout(() => {
                overlay.remove();
                player.playVideo();
                
                // Ê™¢Êü•ÊòØÂê¶ÂÆåÊàêÊâÄÊúâÊ∏¨È©ó
                if (quizzes.every(q => q.completed)) {
                    showFinalScore();
                }
            }, 500);
        }, 2000);
    } else {
        feedback.innerHTML = `
            <div class="feedback-incorrect">
                <span class="emoji">üí°</span>
                ${quiz.feedback.incorrect}
            </div>
        `;
    }
}
</script>
<script>
// ÁîüÊàêÈÄöÈóúÂØÜË™û
function generateCompletionCode(studentId, score) {
    const lastTwoDigits = studentId.slice(-2);
    const randomNum = Math.floor(Math.random() * 9000 + 1000); // 4‰ΩçÈö®Ê©üÊï∏Â≠ó
    const completionCode = `${lastTwoDigits}${score}${randomNum}`;
    
    // ÂÑ≤Â≠òË≥áÊñôÂà∞ localStorage
    const studentData = {
        studentId: studentId,
        studentName: document.getElementById('welcomeMessage').textContent.split(' ')[1],
        score: score,
        completionCode: completionCode,
        completionTime: new Date().toLocaleString()
    };
    
    // ÂÑ≤Â≠òÊàñÊõ¥Êñ∞Â≠∏ÁîüÁ¥ÄÈåÑ
    const allRecords = JSON.parse(localStorage.getItem('studentRecords') || '{}');
    allRecords[studentId] = studentData;
    localStorage.setItem('studentRecords', JSON.stringify(allRecords));
    localStorage.setItem(completionCode, JSON.stringify(studentData));
    
    return completionCode;
}

// È°ØÁ§∫ÊúÄÁµÇÂàÜÊï∏ÂíåÈÄöÈóúÂØÜË™û
function showFinalScore() {
    const studentId = document.getElementById('studentId').value;
    const completionCode = generateCompletionCode(studentId, score);
    
    const scoreOverlay = document.createElement('div');
    scoreOverlay.className = 'final-score-overlay';
    scoreOverlay.innerHTML = `
        <div class="final-score-container">
            <div class="celebration-emoji">üéâ</div>
            <h2>ÊÅ≠ÂñúÂÆåÊàêÊâÄÊúâÊ∏¨È©óÔºÅ</h2>
            <div class="score-display">
                ÂæóÂàÜÔºö${score}/${totalQuestions}
            </div>
            <div class="score-message">
                ${getScoreMessage(score)}
            </div>
            <div class="completion-code">
                <h3>ÊÇ®ÁöÑÈÄöÈóúÂØÜË™û</h3>
                <div class="code-display">${completionCode}</div>
                <p>Ë´ãÂ∞áÊ≠§ÈÄöÈóúÂØÜË™û‰∫§Áµ¶ËÄÅÂ∏´‰ª•Ë≠âÊòéÂÆåÊàêÊ∏¨È©ó</p>
            </div>
            <button onclick="this.parentElement.parentElement.remove()">ÂÆåÊàê</button>
        </div>
    `;
    document.body.appendChild(scoreOverlay);
}

// Ê†πÊìöÂàÜÊï∏Áµ¶‰∫àË©ïË™û
function getScoreMessage(score) {
    const percentage = (score / totalQuestions) * 100;
    if (percentage === 100) return "Â§™Ê£í‰∫ÜÔºÅ‰Ω†ÂÆåÂÖ®ÊéåÊè°‰∫ÜË∑≥Áπ©ÁöÑË¶ÅÈ†òÔºÅüåü";
    if (percentage >= 80) return "ÂÅöÂæóÂæàÂ•ΩÔºÅÂÜçÂ§öÁ∑¥Áøí‰∏Ä‰∏ãÂ∞±Êõ¥ÂÆåÁæé‰∫ÜÔºÅ‚ú®";
    if (percentage >= 60) return "ÂèäÊ†ºÂõâÔºÅÁπºÁ∫åÂä†Ê≤πÔºÅüí™";
    return "Ë¶ÅÂ§öÂ§öÁ∑¥ÁøíÂñîÔºÅÂà•ÁÅ∞ÂøÉÔºÅüìö";
}

// Êü•Ë©¢ÈÄöÈóúÂØÜË™û
function queryCompletionCode() {
    const code = document.getElementById('codeQuery').value.trim();
    const resultDiv = document.getElementById('queryResult');

    // Ê™¢Êü•ÊòØÂê¶ÊòØÊü•ÁúãÊâÄÊúâÂ≠∏ÁîüÁöÑÁâπÊÆä‰ª£Á¢º
    if (code === '9292929') {
        showAllStudentRecords();
        return;
    }
    
    const studentData = localStorage.getItem(code);
    if (studentData) {
        const data = JSON.parse(studentData);
        resultDiv.innerHTML = `
            <div class="query-result-success">
                <p>Â≠∏ËôüÔºö${data.studentId}</p>
                <p>ÂßìÂêçÔºö${data.studentName}</p>
                <p>ÂæóÂàÜÔºö${data.score}/${totalQuestions}</p>
                <p>ÂÆåÊàêÊôÇÈñìÔºö${data.completionTime}</p>
            </div>
        `;
    } else {
        resultDiv.innerHTML = `
            <div class="query-result-error">
                Êú™ÊâæÂà∞Ê≠§ÈÄöÈóúÂØÜË™ûÁöÑÁ¥ÄÈåÑ
            </div>
        `;
    }
}

// È°ØÁ§∫ÊâÄÊúâÂ≠∏ÁîüË®òÈåÑ
function showAllStudentRecords() {
    const resultDiv = document.getElementById('queryResult');
    const allRecords = JSON.parse(localStorage.getItem('studentRecords') || '{}');
    
    if (Object.keys(allRecords).length === 0) {
        resultDiv.innerHTML = `
            <div class="query-result-error">
                ÁõÆÂâçÈÇÑÊ≤íÊúâÂ≠∏ÁîüÂÆåÊàêÊ∏¨È©ó
            </div>
        `;
        return;
    }

    let tableHTML = `
        <table class="all-students-table">
            <thead>
                <tr>
                    <th>Â≠∏Ëôü</th>
                    <th>ÂßìÂêç</th>
                    <th>ÂæóÂàÜ</th>
                    <th>ÈÄöÈóúÂØÜË™û</th>
                    <th>ÂÆåÊàêÊôÇÈñì</th>
                </tr>
            </thead>
            <tbody>
    `;

    for (const studentId in allRecords) {
        const data = allRecords[studentId];
        tableHTML += `
            <tr>
                <td>${data.studentId}</td>
                <td>${data.studentName}</td>
                <td>${data.score}/${totalQuestions}</td>
                <td>${data.completionCode}</td>
                <td>${data.completionTime}</td>
            </tr>
        `;
    }

    tableHTML += `
            </tbody>
        </table>
    `;

    resultDiv.innerHTML = tableHTML;
}

// Âú®È†ÅÈù¢Âä†ËºâÊôÇÊ∏ÖÁêÜÈÅéÊúüÁöÑË≥áÊñôÔºàÂèØÈÅ∏Ôºâ
function cleanupOldData() {
    const oneWeekAgo = new Date();
    oneWeekAgo.setDate(oneWeekAgo.getDate() - 7);
    
    const allRecords = JSON.parse(localStorage.getItem('studentRecords') || '{}');
    let cleaned = false;
    
    for (const studentId in allRecords) {
        const completionTime = new Date(allRecords[studentId].completionTime);
        if (completionTime < oneWeekAgo) {
            delete allRecords[studentId];
            cleaned = true;
        }
    }
    
    if (cleaned) {
        localStorage.setItem('studentRecords', JSON.stringify(allRecords));
    }
}

// Âú®È†ÅÈù¢ËºâÂÖ•ÊôÇÂü∑Ë°åÊ∏ÖÁêÜ
window.addEventListener('load', cleanupOldData);
</script>